!function(){"use strict";!function(){class t{constructor(t,s,i,e){this.x=t,this.y=s,this.color=i,this.originalColor=i,this.status="floating",this.orientation=e}flash(){this.color=t.FLASHING,this.status="flashing"}flashing(){return this.color===t.FLASHING}sink(){this.color=t.SUNK,this.status="sunk"}reset(){this.color=this.originalColor,this.status="floating"}}t.FLASHING="rgba(140, 80, 20, 0.8)",t.SUNK="#000000";var s,i,e,a=t;class h{constructor(t,s){this.status="alive",this.width=90,this.height=60,this.startPos=[t.width/2-this.width/2,t.height/2-this.height/2],this.pos=this.startPos,this.gridPos=[357,357],this.c=s,this.canvas=t,this.dx=0,this.dy=0,this.direction="idle",this.idleDir="left",this.capyLeft=new Image,this.capyLeft.src="./assets/the_real_left.png",this.capyRight=new Image,this.capyRight.src="./assets/the_real_right.png",this.capyIdle=new Image,this.capyIdle.src="./assets/the_real_idle.png",this.capyDown=new Image,this.capyDown.src="./assets/the_real_front.png",this.capyUp=new Image,this.capyUp.src="./assets/the_real_back.png",this.capyIdleR=new Image,this.capyIdleR.src="./assets/the_real_idle_right.png",this.capyStand=new Image,this.capyStand.src="./assets/the_real_stand.png",this.capySwim=new Image,this.capySwim.src="./assets/the_real_swim.png"}chooseSquare(t,s){return[t,s]}printPos(t){this.move(this.dx,this.dy);let s=Math.floor(t/6),i=this.chooseSprite(),[e,a]=this.pos;this.c.fillStyle="#000000","left"===this.direction?this.c.drawImage(i,75+240*s,0,240,188,e-17,a-25,90,70):"right"===this.direction?this.c.drawImage(i,50+240*s,0,240,188,e+20,a-25,90,70):"up"===this.direction||"down"===this.direction?this.c.drawImage(i,10+215*s,0,215,215,e,a-25,80,80):"idle"===this.direction&&("left"===this.idleDir?this.c.drawImage(i,30+220*s,0,240,188,e-17,a-25,117,91):this.c.drawImage(i,20+220*s,0,240,188,e-10,a-25,117,91))}move(t,s){let[i,e]=this.pos;this.gridPos[0]+t>0&&this.gridPos[0]+t<700&&(i+=t,this.gridPos[0]+=t),this.gridPos[1]+s>0&&this.gridPos[1]+s<700&&(e+=s,this.gridPos[1]+=s),this.pos=[i,e]}chooseSprite(){return"left"===this.direction?this.capyLeft:"right"===this.direction?this.capyRight:"up"===this.direction?this.capyUp:"down"===this.direction?this.capyDown:"idle"===this.direction?"left"===this.idleDir?this.capyIdle:this.capyIdleR:void 0}}s=h,e={},(i=function(t){var s=function(t,s){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var e=i.call(t,"string");if("object"!=typeof e)return e;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof s?s:String(s)}(i="sprites"))in s?Object.defineProperty(s,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):s[i]=e;var r=h,n=class{constructor(t,s){this.raft=new class{constructor(t,s){this.grid=this.makeGrid(),this.size=this.getSize(),this.canvas=t,this.c=s,this.reg_pic=new Image,this.reg_pic.src="./assets/minecraft_wood.png",this.flashing_pic=new Image,this.flashing_pic.src="./assets/flashing3.png",this.reg_90=new Image,this.reg_90.src="./assets/minecraft_wood_90.png",this.flashing_90=new Image,this.flashing_90.src="./assets/flashing3_90.png"}makeGrid(){let t=[],s="#5B3113",i="0";for(let e=0;e<7;e++){t.push([]);for(let h=0;h<7;h++)t[e].push(new a(e,h,s,i)),s=this.colorSwitch(s),i=this.orientationSwitch(i)}return t}getSize(){let t=0;for(let s=0;s<this.grid.length;s++)for(let s=0;s<this.grid[0].length;s++)t++;return t}flashSquares(t){let s=Math.floor(this.size*(t/100)),i=Math.sqrt(this.size);for(;s>0;){let t=Math.floor(Math.random()*i),e=Math.floor(Math.random()*i),a=this.grid[t][e];a.flashing()||(a.flash(),s--)}this.draw()}dropSquares(){for(let t=0;t<Math.sqrt(this.size);t++)for(let s=0;s<Math.sqrt(this.size);s++){let i=this.grid[t][s];"flashing"===i.status&&i.sink()}}resetSquares(){for(let t=0;t<Math.sqrt(this.size);t++)for(let s=0;s<Math.sqrt(this.size);s++)this.grid[t][s].reset()}draw(){let t,s=[],i="0",e=10*(Math.random()-.5),h=10*(Math.random()-.5);for(let e=0;e<7;e++)for(let h=0;h<7;h++)s.push(new a(e,h,t,i)),t=this.colorSwitch(t),i="0"===i?"90":"0";let r=this.canvas.width/2,n=this.canvas.height/2;for(let t=0;t<Math.sqrt(this.size);t++)for(let s=0;s<Math.sqrt(this.size);s++){let i=this.grid[t][s];i.windowX=r-350+100*t,i.windowY=n-350+100*s,"sunk"!==i.status&&(this.c.fillStyle=i.color,"0"===i.orientation?"floating"===i.status?this.c.drawImage(this.reg_pic,100*i.x+r-350,100*i.y+n-350,100,100):this.c.drawImage(this.flashing_pic,100*i.x+r-350+e,100*i.y+n-350+h,100,100):"floating"===i.status?this.c.drawImage(this.reg_90,100*i.x+r-350,100*i.y+n-350,100,100):this.c.drawImage(this.flashing_90,100*i.x+r-350+e,100*i.y+n-350+h,100,100))}}colorSwitch(t){return"#693816"===t?"#5B3113":"#693816"}orientationSwitch(t){return"0"===t?"90":"0"}}(t,s),this.player=new r(t,s),this.score=0,this.difficulty="medium"}survive(){let t=Math.floor(this.player.gridPos[0]/100),s=Math.floor(this.player.gridPos[1]/100);return"sunk"!==this.raft.grid[t][s].status}};class c{constructor(t,s,i){this.canvas=t,this.c=s,this.startX=this.canvas.width/2-250,this.startY=this.canvas.height/2-250,this.game=i,this.background=new Image,this.background.src="./assets/pokemon_sea.png",this.frame=0,this.moveFrame=0,this.startFrame=0,this.timer=935,this.counter=3,this.speed=7,this.started=!1,this.velocity=1.5,this.origVel=this.velocity,this.dy=0,this.gravity=.08,this.fps=90,this.randStart=Math.random()*this.canvas.height*.8+.1*this.canvas.height,document.addEventListener("keydown",(t=>{"ArrowUp"===t.key?(this.game.player.dy=-this.speed,0===this.game.player.dx&&(this.game.player.direction="up")):"ArrowRight"===t.key?(this.game.player.dx=this.speed,this.game.player.direction="right",this.game.player.idleDir="right"):"ArrowDown"===t.key?(this.game.player.dy=this.speed,0===this.game.player.dx&&(this.game.player.direction="down")):"ArrowLeft"===t.key&&(this.game.player.dx=-this.speed,this.game.player.direction="left",this.game.player.idleDir="left")})),document.addEventListener("keyup",(t=>{"ArrowUp"===t.key?this.game.player.dy===-this.speed&&(this.game.player.dy=0,0===this.game.player.dx&&(this.game.player.direction="idle")):"ArrowRight"===t.key?this.game.player.dx===this.speed&&(this.game.player.dx=0,0===this.game.player.dy?this.game.player.direction="idle":this.game.player.dy>0?this.game.player.direction="down":this.game.player.direction="up"):"ArrowDown"===t.key?i.player.dy===this.speed&&(i.player.dy=0,0===i.player.dx&&(i.player.direction="idle")):"ArrowLeft"===t.key&&i.player.dx===-this.speed&&(i.player.dx=0,0===i.player.dy?i.player.direction="idle":i.player.dy>0?i.player.direction="down":i.player.direction="up")}))}animate(){this.c.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawBackground(this.frame),this.game.raft.draw(),this.game.player.printPos(this.moveFrame),this.scoreboard(),this.frame+=1,this.moveFrame>=29?this.moveFrame=0:this.moveFrame++,this.game.survive()?setTimeout((()=>{requestAnimationFrame(this.animate.bind(this))}),1e3/this.fps):(this.gameOver(),clearInterval(this.interval),document.addEventListener("click",this.restartGame.bind(this),{once:!0}))}start(){setTimeout((()=>{this.c.drawImage(this.background,0,0,2e3,1e3,0,0,this.canvas.width,this.canvas.height),this.c.fillStyle="rgba(255, 255, 255, 1)",this.c.font="30px sans serif",this.swimFrames=0,this.animateStart()}),100),document.addEventListener("keydown",(()=>{let t;this.started=!0,this.c.drawImage(this.background,0,0);let s=0,i=!1,e=!1;setTimeout((()=>{this.c.fillStyle="rgba(255, 255, 255, 1)",this.c.font="300px sans serif";let a=[this.canvas.width/2-60,0];t=setInterval((()=>{if(this.c.drawImage(this.background,0,0),this.game.raft.draw(),this.c.fillStyle="rgba(255, 255, 255, 1)",this.c.fillText("3",this.canvas.width/2-340,this.canvas.height/2-120),!0===i&&this.c.fillText("2",this.canvas.width/2-65,this.canvas.height/2-120),!0===e&&this.c.fillText("1",this.canvas.width/2+210,this.canvas.height/2-120),a[1]<=this.canvas.height/2-50)this.c.drawImage(this.game.player.capyIdle,30,0,240,188,a[0],a[1],117,91),a[1]+=5;else if(s<=49){let t=Math.floor(s/10%50);this.c.drawImage(this.game.player.capyStand,1200-305*t,0,305,188,a[0],a[1],100,80),s+=1}else if(s<=99)this.c.drawImage(this.game.player.capyStand,0,0,305,188,a[0],a[1],100,80),s+=1;else if(s<=149){let t=Math.floor(s/10%5);this.c.drawImage(this.game.player.capyStand,305*t,0,305,188,a[0],a[1],100,80),s++}else this.c.drawImage(this.game.player.capyIdle,30,0,240,188,a[0],a[1],117,91)}),1e3/this.fps)}),200),setTimeout((()=>{this.c.font="300px sans serif",i=!0}),1135),setTimeout((()=>{this.c.font="300px sans serif",e=!0}),2070),setTimeout((()=>{this.interval=setInterval(this.cycle.bind(this),this.timer),window.clearInterval(t),window.clearInterval(void 0),this.game.player.idleDir="left",requestAnimationFrame(this.animate.bind(this))}),3005)}),{once:!0})}loop(){let t=0;setInterval((()=>{t%3==0?this.game.raft.flashSquares(80):t%3==1?this.game.raft.dropSquares():(this.game.raft.resetSquares(),this.game.score+=100),t++}),1200)}scoreboard(){this.c.fillStyle="rgba(100, 100, 100, .6)",this.c.fillRect(0,0,230,40),this.c.font="30px bradley hand",this.c.fillStyle="#FFFFFF",this.c.fillText(`SCORE:      ${this.game.score}`,0,30)}drawBackground(t){let s=Math.floor(t/20);s%4==3?this.c.drawImage(this.background,0,0,2e3,1e3,0,0,this.canvas.width,this.canvas.height):s%4==2?this.c.drawImage(this.background,50,10,2e3,1e3,0,0,this.canvas.width,this.canvas.height):s%4==1?this.c.drawImage(this.background,100,0,2e3,1e3,0,0,this.canvas.width,this.canvas.height):this.c.drawImage(this.background,150,10,2e3,1e3,0,0,this.canvas.width,this.canvas.height)}restartGame(){let t=new n(this.canvas,this.c);new c(this.canvas,this.c,t).start()}cycle(){this.counter%3==0?this.counter<=6?this.game.raft.flashSquares(40):this.counter<=12?this.game.raft.flashSquares(60):this.counter<=18?this.game.raft.flashSquares(75):this.counter<=24?this.game.raft.flashSquares(82):this.counter<=30?this.game.raft.flashSquares(86):this.counter<=39?this.game.raft.flashSquares(90):this.counter<=48?this.game.raft.flashSquares(92):this.counter<=57?this.game.raft.flashSquares(95):this.counter<=66?this.game.raft.flashSquares(97):this.game.raft.flashSquares(98):this.counter%3==1?this.game.raft.dropSquares():(this.game.raft.resetSquares(),this.game.score+=100),this.counter++}instructions(t){this.c.font="30px bradley hand",this.c.fillText("Press any key to start!",this.canvas.width/2-140,this.canvas.height/2+30-t)}gameOver(){this.c.fillStyle="rgba(0, 0, 0, 0.7)",this.c.fillRect(0,0,this.canvas.width,this.canvas.height),this.c.fillStyle="rgba(255, 255, 255, 1)",this.c.fillText("Game Over",this.canvas.width/2-75,this.canvas.height/2-200),this.c.fillText("Final Score",this.canvas.width/2-78,this.canvas.height/2),this.c.fillText(`${this.game.score}`,this.canvas.width/2-25,this.canvas.height/2+50),this.c.fillText("click to restart",this.canvas.width/2-100,this.canvas.height/2+200)}animateStart(){this.c.clearRect(0,0,this.canvas.width,this.canvas.height),this.dy>=0?(this.dy+=this.velocity,this.velocity-=this.gravity):(this.velocity=this.origVel,this.dy=0),this.drawBackground(Math.floor(this.startFrame/2)),this.instructions(this.dy);let t=Math.floor(this.swimFrames/10%5);this.c.drawImage(this.game.player.capySwim,20+270*t,0,270,140,this.canvas.width-4*this.swimFrames,this.randStart,117,61),this.swimFrames<.3*this.canvas.width?this.swimFrames++:(this.swimFrames=0,this.randStart=Math.random()*this.canvas.height*.8+.1*this.canvas.height),this.startFrame++,!1===this.started?setTimeout((()=>{requestAnimationFrame(this.animateStart.bind(this))}),1e3/this.fps):(this.c.clearRect(0,0,this.canvas.width,this.canvas.height),this.drawBackground(Math.floor(this.startFrame/2)),this.game.raft.draw())}}var o=c;const l=document.querySelector("canvas");l.width=window.innerWidth,l.height=window.innerHeight-50;const d=l.getContext("2d");new o(l,d,new n(l,d)).start();const g=document.createElement("audio");g.src="./assets/sans_trim.mp3.mov";let m=!1;document.addEventListener("keydown",(()=>{!1===m&&(g.play(),g.loop=!0,m=!0)}),{once:!0});let p=document.querySelector("#sound");p.addEventListener("click",(()=>{!0===m?(g.pause(),m=!1,p.setAttribute("src","./assets/sound_off.png")):(g.play(),m=!0,p.setAttribute("src","./assets/sound_on.png"))}));let y=document.getElementById("myModal"),f=document.getElementById("myBtn"),u=document.getElementsByClassName("close")[0];y.addEventListener("click",(t=>{y.style.display="none"})),f.onclick=function(){y.style.display="block"},u.onclick=function(){y.style.display="none"}}()}();
//# sourceMappingURL=main.js.map